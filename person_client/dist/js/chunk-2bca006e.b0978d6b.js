(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bca006e"],{"947f":function(e,t,a){},d1eb:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ant-add-project"},[a("div",{style:{width:e.width,margin:"0 20px",padding:"30px 20px"}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,labelAlign:"left"}},[a("a-form-model-item",{ref:"name",attrs:{label:"名称",prop:"name"}},[a("a-input",{attrs:{placeholder:"网站、项目等资源名，最多 25 字"},on:{blur:function(){e.$refs.name.onFieldBlur()}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("a-form-model-item",{ref:"detail",attrs:{label:"描述",prop:"detail"}},[a("a-input",{attrs:{placeholder:"用一句话简单介绍资源，最多 80 字"},on:{blur:function(){e.$refs.detail.onFieldBlur()}},model:{value:e.form.detail,callback:function(t){e.$set(e.form,"detail",t)},expression:"form.detail"}})],1),a("a-form-model-item",{ref:"url",attrs:{label:"链接",prop:"url"}},[a("a-input",{attrs:{placeholder:"便于找到资源的网址，http(s) 开头"},on:{blur:function(){e.$refs.url.onFieldBlur()}},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),a("a-form-model-item",{ref:"git_url",attrs:{label:"仓库链接",prop:"git_url"}},[a("a-input",{attrs:{placeholder:"便于找到资源的远程仓库地址"},on:{blur:function(){e.$refs.git_url.onFieldBlur()}},model:{value:e.form.git_url,callback:function(t){e.$set(e.form,"git_url",t)},expression:"form.git_url"}})],1),a("a-form-model-item",{attrs:{label:"分类",prop:"category"}},[a("a-radio-group",{attrs:{defaultValue:e.form.category},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[a("a-radio",{attrs:{value:1}},[e._v(" 个人 ")]),a("a-radio",{attrs:{value:2}},[e._v(" 团队 ")]),a("a-radio",{attrs:{value:3}},[e._v(" 其他 ")])],1)],1),a("a-form-model-item",{ref:"tag",attrs:{label:"标签",prop:"tag"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags",allowClear:"",placeholder:"可选至多 5 个标签，支持搜索",defaultValue:e.defaultTags},on:{change:e.handleSelectTag},model:{value:e.tags,callback:function(t){e.tags=t},expression:"tags"}},e._l(e.tagList,(function(t){return a("a-select-option",{key:t.toString()},[e._v(" "+e._s(t)+" ")])})),1)],1),a("a-form-model-item",{ref:"image",attrs:{label:"图片",prop:"image"}},[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:e.url,name:"file","list-type":"picture-card","file-list":e.fileList,multiple:!0},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<5?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" Upload ")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)]),a("a-form-model-item",{attrs:{label:"详细"}},[a("a-input",{staticStyle:{height:"100px",resize:"none"},attrs:{placeholder:"详细介绍该资源的作用、用法等",type:"textarea"},model:{value:e.form.introduce,callback:function(t){e.$set(e.form,"introduce",t)},expression:"form.introduce"}})],1),a("a-form-model-item",{attrs:{"wrapper-col":e.wrapperCol1}},[a("a-button",{staticStyle:{width:"30%","min-width":"64px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 提交 ")]),a("a-button",{staticStyle:{"margin-left":"30px"},on:{click:e.resetForm}},[e._v(" 取消 ")])],1)],1)],1)])},i=[],l=a("1da1"),o=(a("96cf"),a("d3b7"),a("ac1f"),a("1276"),a("159b"),a("a15b"),a("a434"),a("40a7"));function n(e){return new Promise((function(t,a){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return a(e)}}))}var s={data:function(){return{labelCol:{sm:{span:12},md:{span:8,offset:0},lg:{span:5,offset:0}},wrapperCol:{sm:{span:24},md:{span:16,offset:0},lg:{span:19,offset:0}},wrapperCol1:{sm:{span:24,offset:0},md:{span:16,offset:8},lg:{span:19,offset:5}},locale:o["a"],imageUrl:"",loading:"",defaultTags:[],tags:[],tagList:["PHP","Vue","Html","Css","MySQL","MongoDB","Redis","Nginx","Apache","小程序","H5","APP"],url:this.config.interfaceUrl+"/project/uploadProjectImg",width:"60%",id:this.$route.query.id,previewVisible:!1,previewImage:"",fileList:[],form:{name:"",detail:"",introduce:"",image:"",url:"",git_url:"",tag:"",skill:"",category:""},rules:{name:[{required:!0,message:"请填写资源名称",trigger:"change"}],detail:[{required:!0,message:"请填写描述",trigger:"change"}],introduce:[{required:!0,message:"请填写详细介绍及说明",trigger:"change"}],skill:[{required:!0,message:"请填写手机号",trigger:"change"}],category:[{required:!0,message:"请选择分类",trigger:"change"}]}}},mounted:function(){var e=this;this.getProjectOne(this.$route.query.id),document.documentElement.clientWidth<768?this.width="90%":this.width="60%",window.addEventListener("resize",(function(){var t=document.documentElement.clientWidth;e.width=t<768?"90%":"60%"}))},methods:{getProjectOne:function(e){var t=this;this.axios.get("project/".concat(e)).then((function(e){if(1==e.status){t.form=e.data;var a=e.data.tag.split(","),r=e.data.image.split(",");a.forEach((function(e){return t.tags.push(e)})),r.forEach((function(e,a){var r={uid:a,name:"image.png",response:{data:e},status:"done",url:t.config.mediaUrl+e};t.fileList.push(r)}))}else t.$message.error(e.info)}))},onSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;var a=[];e.fileList.forEach((function(e){return a.push(e.response.data)})),e.form.image=a.join(","),e.axios.put("project/".concat(e.id),{params:e.form}).then((function(t){1==t.status?(e.$message.success(t.info),e.$router.push("/project")):e.$message.error(t.info)}))}))},handleSelectTag:function(e){e.length>6?(this.$message.warning("最多只能选择6个标签"),this.tags.splice(this.tags.length-1,1)):e.length<1&&this.$message.warning("至少选择1个标签"),this.form.tag=this.tags.join(",")},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,n(e.originFileObj);case 3:e.preview=a.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleChange:function(e){var t=e.fileList;this.fileList=t},resetForm:function(){this.$refs.ruleForm.resetFields(),this.$router.go(-1)}}},u=s,c=(a("e97c"),a("2877")),f=Object(c["a"])(u,r,i,!1,null,"2aae1ae8",null);t["default"]=f.exports},e97c:function(e,t,a){"use strict";a("947f")}}]);
//# sourceMappingURL=chunk-2bca006e.b0978d6b.js.map